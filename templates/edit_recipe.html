{% extends "base.html" %}
{% block title %}Edit Recipe â€¢ Recipe Rumble{% endblock %}
{% block content %}
<div class="container">
  <h2 class="h3 fw-semibold text-accent mb-4">Edit Recipe</h2>
  <div class="card card-foody">
    <div class="card-body">
      <h3 class="h5 mb-3">Edit "{{ recipe['title'] }}"</h3>
      <form method="post" action="{{ url_for('edit_recipe', recipe_id=recipe['id']) }}" enctype="multipart/form-data">
        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label">Title</label>
            <input type="text" name="title" value="{{ recipe['title'] }}" required class="form-control">
          </div>
          <div class="col-md-6">
            <label class="form-label">Ingredients</label>
            <textarea name="ingredients" required class="form-control" rows="4">{{ recipe['ingredients'] }}</textarea>
          </div>
          <div class="col-12">
            <label class="form-label">Instructions</label>
            <textarea name="instructions" required class="form-control" rows="6">{{ recipe['instructions'] }}</textarea>
          </div>
          
          <div class="col-md-6">
            <label class="form-label">Current Image</label>
            {% if recipe['image_base64'] %}
              <img src="data:image/jpeg;base64,{{ recipe['image_base64'] }}" class="img-fluid rounded-xxl img-cover" alt="{{ recipe['title'] }}">
            {% else %}
              <div class="form-text">No image uploaded.</div>
            {% endif %}
          </div>
          <div class="col-md-6">
            <label class="form-label">Replace Image (PNG/JPEG only)</label>
            <input type="file" name="image" accept="image/png, image/jpeg" class="form-control" id="editImageInput">
            <div class="form-text">Leave empty to keep the current image.</div>
          </div>
          <div class="col-12 d-flex gap-2">
            <button class="btn btn-accent-gradient" type="submit">Update Recipe</button>
            <a href="{{ url_for('index') }}" class="btn btn-outline-secondary">Cancel</a>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}
